{% extends "site_base.html" %}
{% load i18n %}
{% load media %}

{% block bodyclass %}game{% endblock %}

{% block extrajs %}
    {{ block.super }}
    <script>
        $(function() {
            SetWithMe.Game.init('{{ game_id }}');
            $('#js_set_button').click(SetWithMe.Game.markSet.bind(SetWithMe.Game));
        });
    </script>
{% endblock %}

{% block content %}
    <a href="#" class="set_button big_button" id="js_set_button">
        <span class="label" id="js_set_button_label">Set!</span>
        <span class="timer" id="js_countdown"></span>
    </a>

    <ul id="js_cards" class="card_list"></ul>
    <div id="js_users"></div>

    <ul class="players" id="js_players"></ul>
  
    <div class="chat_container" style="display: none">
      <ul class="chat_messages"></ul>
      <form action="{% url chat.views.put_message game_id %}" method="POST" class="js_chat_message_form">
        {% csrf_token %}
        <input type="text" name="message" placeholder="{% trans 'Enter message here...' %}">
        <button type="submit">{% trans 'Send' %}</button>
      </form>
    </div>

    <div class="winner_plate">
    <h1>Game over. And winner is...</h1>
    <div id="js_user_place"></div>
    <a href="{% url lobby %}" class="playagain">Play one more time</a>
    </div>

    <div class="cards_left"><span id="js_cards_left">81</span> cards left</div>
{% endblock %}
